var v=(x,u,a)=>new Promise((i,p)=>{var o=n=>{try{l(a.next(n))}catch(c){p(c)}},g=n=>{try{l(a.throw(n))}catch(c){p(c)}},l=n=>n.done?i(n.value):Promise.resolve(n.value).then(o,g);l((a=a.apply(x,u)).next())});import{j as e,O as S}from"./index-5a8bf324.js";import{d as k,r as h,L as z}from"./vendor-2240c9f5.js";import{F as d,b as m,o as F,B,a as s}from"./ui-2716f190.js";const L=()=>e.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"currentColor",children:e.jsx("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"})}),w=()=>e.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"currentColor",children:e.jsx("path",{d:"M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zm-6 9c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2zm3.1-9H8.9V6c0-1.71 1.39-3.1 3.1-3.1 1.71 0 3.1 1.39 3.1 3.1v2z"})}),P=()=>e.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"currentColor",children:e.jsx("path",{d:"M6.62 10.79c1.44 2.83 3.76 5.14 6.59 6.59l2.2-2.2c.27-.27.67-.36 1.02-.24 1.12.37 2.33.57 3.57.57.55 0 1 .45 1 1V20c0 .55-.45 1-1 1-9.39 0-17-7.61-17-17 0-.55.45-1 1-1h3.5c.55 0 1 .45 1 1 0 1.25.2 2.45.57 3.57.11.35.03.74-.25 1.02l-2.2 2.2z"})}),T=()=>e.jsx("svg",{width:"64",height:"64",viewBox:"0 0 24 24",fill:"#4F7DFE",children:e.jsx("path",{d:"M21 6h-2v9H6v2c0 .55.45 1 1 1h11l4 4V7c0-.55-.45-1-1-1zm-4 6V3c0-.55-.45-1-1-1H3c-.55 0-1 .45-1 1v14l4-4h10c.55 0 1-.45 1-1z"})}),t={authContainer:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",minHeight:"100vh",padding:"20px",backgroundColor:"#f5f7fa"},authCard:{width:"100%",maxWidth:"400px",padding:"30px",borderRadius:"12px",backgroundColor:"white",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.1)"},authLogo:{display:"flex",flexDirection:"column",alignItems:"center",marginBottom:"32px"},authTitle:{fontSize:"24px",fontWeight:"bold",marginTop:"16px",color:"#333"},authForm:{width:"100%"},formGroup:{marginBottom:"20px"},authInput:{fontSize:"16px",height:"50px"},inputPrefix:{marginRight:"10px",color:"#999"},terms:{marginBottom:"20px"},termsText:{fontSize:"14px"},termsLink:{color:"#4F7DFE",textDecoration:"none"},authBtn:{height:"46px",fontSize:"16px"},authFooter:{marginTop:"24px",textAlign:"center",fontSize:"14px",color:"#666"},registerLink:{color:"#4F7DFE",textDecoration:"none"}},G=()=>{const x=k(),[u,a]=h.useState(""),[i,p]=h.useState(""),[o,g]=h.useState(""),[l,n]=h.useState(""),[c,I]=h.useState(!1),[j,y]=h.useState(!1),b=()=>v(void 0,null,function*(){if(!u.trim()){s.show({content:"请输入姓名",duration:1500});return}if(!i.trim()){s.show({content:"请输入手机号",duration:1500});return}if(!/^1[3-9]\d{9}$/.test(i)){s.show({content:"手机号格式不正确",duration:1500});return}if(!o.trim()){s.show({content:"请输入密码",duration:1500});return}if(o.length<6||o.length>20){s.show({content:"密码长度应为6-20位",duration:1500});return}if(o!==l){s.show({content:"两次输入的密码不一致",duration:1500});return}if(!c){s.show({content:"请阅读并同意用户协议",duration:1500});return}y(!0);try{const r=yield S.post("/api/auth/register",{username:u.trim(),phone:i.trim(),password:o.trim()});r.data.success?localStorage.getItem("rememberMe")==="true"?(localStorage.setItem("token",r.data.data.token),localStorage.setItem("user",JSON.stringify(r.data.data.user)),localStorage.setItem("userId",r.data.data.user.id.toString()),s.show({icon:"success",content:"注册成功",duration:1500}),x("/")):(s.show({icon:"success",content:"注册成功，请登录",duration:1500}),x("/login")):s.show({icon:"fail",content:r.data.message||"注册失败",duration:1500})}catch(r){console.error("注册失败:",r);let f="注册失败";r.response&&r.response.data&&r.response.data.message&&(f=r.response.data.message),s.show({icon:"fail",content:f,duration:2e3})}finally{y(!1)}}),C=()=>{s.show({content:"用户协议内容将在此显示",duration:1500})};return e.jsx("div",{style:t.authContainer,children:e.jsxs("div",{style:t.authCard,children:[e.jsxs("div",{style:t.authLogo,children:[e.jsx(T,{}),e.jsx("h1",{style:t.authTitle,children:"AI牵伴"})]}),e.jsxs(d,{layout:"vertical",style:t.authForm,children:[e.jsx(d.Item,{label:"姓名",style:t.formGroup,children:e.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[e.jsx("span",{style:t.inputPrefix,children:e.jsx(L,{})}),e.jsx(m,{style:t.authInput,placeholder:"请输入您的真实姓名",value:u,onChange:a,clearable:!0})]})}),e.jsx(d.Item,{label:"手机号",style:t.formGroup,children:e.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[e.jsx("span",{style:t.inputPrefix,children:e.jsx(P,{})}),e.jsx(m,{style:t.authInput,placeholder:"请输入您的手机号码",value:i,onChange:p,type:"tel",clearable:!0})]})}),e.jsx(d.Item,{label:"密码",style:t.formGroup,children:e.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[e.jsx("span",{style:t.inputPrefix,children:e.jsx(w,{})}),e.jsx(m,{style:t.authInput,placeholder:"请设置6-20位密码",value:o,onChange:g,type:"password",clearable:!0})]})}),e.jsx(d.Item,{label:"确认密码",style:t.formGroup,children:e.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[e.jsx("span",{style:t.inputPrefix,children:e.jsx(w,{})}),e.jsx(m,{style:t.authInput,placeholder:"请再次输入密码",value:l,onChange:n,type:"password",clearable:!0})]})}),e.jsx(d.Item,{style:t.terms,children:e.jsx(F,{checked:c,onChange:I,children:e.jsxs("span",{style:t.termsText,children:["我已阅读并同意 ",e.jsx("a",{style:t.termsLink,onClick:C,children:"《用户协议》"})]})})}),e.jsx(B,{style:t.authBtn,color:"primary",block:!0,size:"large",onClick:b,loading:j,disabled:j,children:"注册"})]}),e.jsxs("div",{style:t.authFooter,children:["已有账号？ ",e.jsx(z,{style:t.registerLink,to:"/login",children:"立即登录"})]})]})})};export{G as default};
