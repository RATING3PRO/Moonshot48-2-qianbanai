# AI牵伴内网穿透配置指南

本文档将指导您如何使用内网穿透工具将您的AI牵伴服务暴露到公网，以便在局域网外也能访问AI对话功能。

## 什么是内网穿透？

内网穿透是一种将本地服务（如运行在您电脑上的AI牵伴）映射到公网IP的技术，使得外部网络也能访问您的本地服务。

## 方法一：使用Ngrok（推荐初学者使用）

Ngrok是一个简单易用的内网穿透工具，适合快速测试和个人使用。

### 步骤1: 下载安装Ngrok

1. 访问 [Ngrok官网](https://ngrok.com/) 注册账号
2. 下载适合您系统的Ngrok客户端
3. 解压下载的文件到任意文件夹

### 步骤2: 配置Ngrok

1. 打开命令提示符或终端
2. 进入Ngrok所在文件夹
3. 运行以下命令添加您的认证令牌（在Ngrok网站注册后可获得）:

```
ngrok authtoken 您的认证令牌
```

### 步骤3: 启动内网穿透

确保您的AI牵伴服务已在本地运行（通常是在http://localhost:3000），然后运行:

```
ngrok http 3000
```

### 步骤4: 获取公网地址

Ngrok启动后，它会显示一个类似`https://xxxx.ngrok.io`的地址。这就是您的AI牵伴服务的公网地址。

在"网络访问"页面中，选择"内网穿透连接"选项卡，并在URL输入框中填入:

```
https://xxxx.ngrok.io/remote-ai
```

然后点击"更新二维码"按钮生成新的二维码。

## 方法二：使用FRP（适合进阶用户）

FRP是一个强大的内网穿透工具，适合长期稳定运行。

### 步骤1: 准备工作

FRP需要一台具有公网IP的服务器。您可以使用云服务提供商如阿里云、腾讯云等的VPS服务。

### 步骤2: 下载FRP

1. 访问 [FRP GitHub发布页](https://github.com/fatedier/frp/releases)
2. 下载适合您系统的FRP版本并解压

### 步骤3: 配置服务端（在您的公网服务器上）

1. 上传`frps`和`frps.ini`文件到您的服务器
2. 编辑`frps.ini`文件:

```ini
[common]
bind_port = 7000
dashboard_port = 7500
dashboard_user = admin
dashboard_pwd = 安全的密码
```

3. 启动FRP服务端:

```
./frps -c frps.ini
```

### 步骤4: 配置客户端（在您的本地电脑上）

1. 编辑`frpc.ini`文件:

```ini
[common]
server_addr = 您的服务器IP
server_port = 7000

[web]
type = http
local_port = 3000
custom_domains = 您的域名或服务器IP
```

2. 启动FRP客户端:

```
frpc -c frpc.ini
```

### 步骤5: 获取公网地址

根据您的配置，您可以通过以下地址访问您的AI牵伴服务:

```
http://您的域名或服务器IP/remote-ai
```

## 方法三：使用花生壳（适合国内用户）

花生壳是国内知名的内网穿透服务，易于使用且有中文界面。

### 步骤1: 注册并下载

1. 访问 [花生壳官网](https://hsk.oray.com/) 注册账号
2. 下载并安装花生壳客户端

### 步骤2: 配置映射

1. 打开花生壳客户端并登录
2. 创建新的映射，选择"HTTP"协议
3. 设置本地端口为3000
4. 获取分配的域名

### 步骤3: 使用公网地址

在"网络访问"页面中，选择"内网穿透连接"选项卡，并在URL输入框中填入:

```
http://您的花生壳域名/remote-ai
```

## 注意事项

1. **安全性**: 暴露服务到公网可能带来安全风险，建议:
   - 使用HTTPS加密连接
   - 设置强密码保护您的内网穿透服务
   - 在不需要远程访问时关闭内网穿透

2. **稳定性**: 免费的内网穿透服务可能不稳定或有流量限制，长期使用建议:
   - 考虑付费服务或自建穿透服务
   - 使用固定域名以获得更稳定的访问体验

3. **性能**: 内网穿透会增加一定的网络延迟，对于对实时性要求高的应用可能有影响

## 故障排除

1. **无法连接**: 
   - 检查本地服务是否正常运行
   - 确认内网穿透配置是否正确
   - 检查防火墙是否允许相关端口

2. **连接不稳定**:
   - 尝试降低网络传输质量要求
   - 考虑更换为更稳定的内网穿透服务

3. **URL错误**:
   - 确保URL末尾包含`/remote-ai`路径
   - 检查协议前缀(http/https)是否正确

希望本指南能帮助您成功配置内网穿透服务，使您可以随时随地访问AI牵伴的智能对话功能！ 